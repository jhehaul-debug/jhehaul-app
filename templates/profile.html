{% extends "base.html" %}
{% block title %}My Profile - JHE Haul{% endblock %}
{% block content %}
<div class="card">
    <h2>My Profile</h2>
    <hr>
    <form method="POST" action="{{ url_for('profile_update') }}">
        <div class="form-group">
            <label>First Name</label>
            <input name="first_name" value="{{ current_user.first_name or '' }}">
        </div>
        <div class="form-group">
            <label>Last Name</label>
            <input name="last_name" value="{{ current_user.last_name or '' }}">
        </div>
        <div class="form-group">
            <label>Email</label>
            <input value="{{ current_user.email or '' }}" disabled>
            <small style="color: #666;">Email cannot be changed</small>
        </div>
        <div class="form-group">
            <label>Phone</label>
            <input name="phone" value="{{ current_user.phone or '' }}" placeholder="Your phone number">
        </div>
        <div class="form-group">
            <label>Account Type</label>
            <input value="{{ current_user.user_type.title() if current_user.user_type else 'Not set' }}" disabled>
        </div>
        {% if current_user.user_type == 'customer' %}
        <hr>
        <h3>Notification Preferences</h3>
        <div class="form-group">
            <label>
                <input type="checkbox" name="notify_sms" value="1" {% if current_user.notify_sms %}checked{% endif %}>
                Send me text message notifications (requires phone number)
            </label>
        </div>
        {% endif %}
        {% if current_user.user_type == 'hauler' %}
        <hr>
        <h3>Travel Preferences</h3>
        <div class="form-group">
            <label>Your Home ZIP Code</label>
            <input name="home_zip" value="{{ current_user.home_zip or '' }}" placeholder="Your ZIP code" maxlength="10">
        </div>
        <div class="form-group">
            <label>Max Travel Distance (miles)</label>
            <input name="max_travel_miles" type="number" min="1" max="500" value="{{ current_user.max_travel_miles or '' }}" placeholder="e.g. 25">
            <small style="color: #666;">Jobs beyond this distance won't be shown to you</small>
        </div>
        <div class="form-group">
            <label>
                <input type="checkbox" name="notify_new_jobs" value="1" {% if current_user.notify_new_jobs != False %}checked{% endif %}>
                Email me when new jobs are posted in my area
            </label>
        </div>
        <div class="form-group">
            <label>
                <input type="checkbox" name="notify_sms" value="1" {% if current_user.notify_sms %}checked{% endif %}>
                Also send me text message notifications (requires phone number)
            </label>
        </div>
        {% endif %}
        <button type="submit" class="btn btn-success">Save Changes</button>
    </form>
</div>
{% endblock %}
